function onError(e){console.log(e.message)}function onConfirmRetry(e){e==1&&html5audio.play()}function pad2(e){return(e<10?"0":"")+e}function getStreamInfo(){console.log("Getting stream info...");var e={};$.ajax({type:"GET",url:"http://cp6.shoutcheap.com:2199/rpc/jeremyfu/streaminfo.get",dataType:"jsonp",data:e,success:function(e){parseStreamInfo(e)}})}function parseStreamInfo(e){var t="img/on-air-live.png",n="img/offline.png";$("#serverStatus").removeClass();var r=e.data[0],i=r.track.title,s=r.track.imageurl,o=r.server;if(o=="Online"){if(isPlaying==0){console.log("Restarting stream...");html5audio.play()}if(i=="On Air LIVE"){$("#serverStatus").addClass("live");$("#albumArt").attr("src",t)}else{$("#serverStatus").addClass("online");$("#albumArt").attr("src",s)}$("#currentTrack").html(i)}else{$("#serverStatus").addClass("offline");$("#currentTrack").html("Currently Offline");$("#albumArt").attr("src",n)}setTimeout(function(){getStreamInfo()},5e3)}var progressTimer,playButton,stopButton,activityIndicator,textPosition,myaudioURL="http://184.154.90.186:8064/stream",myaudio=new Audio(myaudioURL),isPlaying=!1,readyStateInterval=null,html5audio={play:function(){isPlaying=!0;myaudio.play();readyStateInterval=setInterval(function(){if(myaudio.readyState<=2){playButton.style.display="none";activityIndicator.style.display="block";textPosition.innerHTML=""}},1e3);myaudio.addEventListener("timeupdate",function(){var e=parseInt(myaudio.currentTime%60),t=parseInt(myaudio.currentTime/60%60),n=parseInt(myaudio.currentTime/60/60%60);isPlaying&&myaudio.currentTime>0&&(textPosition.innerHTML=pad2(n)+":"+pad2(t)+":"+pad2(e))},!1);myaudio.addEventListener("error",function(){console.log("myaudio ERROR")},!1);myaudio.addEventListener("canplay",function(){console.log("myaudio CAN PLAY")},!1);myaudio.addEventListener("waiting",function(){isPlaying=!1;playButton.style.display="none";stopButton.style.display="none";activityIndicator.style.display="block"},!1);myaudio.addEventListener("playing",function(){isPlaying=!0;playButton.style.display="none";activityIndicator.style.display="none";stopButton.style.display="block"},!1);myaudio.addEventListener("ended",function(){html5audio.stop();navigator.notification.confirm("Streaming failed. Possibly due to a network error.",onConfirmRetry,"Stream error","Retry,OK")},!1)},pause:function(){isPlaying=!1;clearInterval(readyStateInterval);myaudio.pause();stopButton.style.display="none";activityIndicator.style.display="none";playButton.style.display="block"},stop:function(){isPlaying=!1;clearInterval(readyStateInterval);myaudio.pause();stopButton.style.display="none";activityIndicator.style.display="none";playButton.style.display="block";myaudio=null;myaudio=new Audio(myaudioURL);textPosition.innerHTML="Stopped."}};